<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Online shop</title>

  <link rel="stylesheet" type="text/css" href="styles/main.css">
  <link rel="stylesheet" type="text/css" href="styles/index.css">
</head>

<% var itemsInCart = items_cart; %>
<% var allItems = items; %>

<body>

  <header>
    <h1>Online shop</h1>
    <nav>
      <a href="checkout">Checkout</a>
    </nav>
  </header>

  <div id="content">

    <main>
      <% if(message) { %>
      <div id="message-container">
        <p><%= message %></p>
        <div id="button-ok">OK</div>
      </div>
      <% } %>
      <table id="table-items">
        <tr>
          <th>Item name</th>
          <th>Options</th>
        </tr>
        <% for (var i = 0; i < allItems.length; i++) { %>
        <tr>
          <td><%= allItems[i].name %></td>
          <td>
            <% if(itemsInCart.some(it => it.id == allItems[i].id)) { %>
            <div class="btn-add-to-cart-disabled">Added to cart</div>
            <% } else { %>
            <div class="btn-add-to-cart">Add to cart</div>
            <% } %>
          </td>
        </tr>
        <% } %>
      </table>
    </main>

  </div>

  <script type="text/javascript">
    var itemsInCart = JSON.parse('<%-JSON.stringify(itemsInCart)%>');
    var items = JSON.parse('<%-JSON.stringify(allItems)%>');
  </script>
  <script type="text/javascript" src="/scripts/index.js"></script>
</body>

</html>